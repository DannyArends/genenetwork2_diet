{% extends "base.html" %}
{% block css %}
    <link rel="stylesheet" type="text/css" href="/static/packages/jqplot/jquery.jqplot.min.css" />
    <link rel="stylesheet" type="text/css" href="/static/new/packages/DataTables/css/jquery.dataTables.css" />
    <link rel="stylesheet" type="text/css" href="/static/packages/DT_bootstrap/DT_bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="/static/packages/TableTools/media/css/TableTools.css" />
{% endblock %}
{% block content %}

    <header class="jumbotron subhead" id="overview">
        <div class="container">
            <h1>Correlation</h1>
        </div>
    </header>

    <table id="corr_results" class="table table-hover table-striped table-bordered">
        <thead>
            <tr>
                <th>Trait</th>
                {% if corr_method == 'pearson' %}
                <th>Sample r</th>
                <th>Sample p(r)</th>
                {% else %}
                <th>Sample rho</th>
                <th>Sample p(rho)</th>
                {% endif %}
                <th>Symbol</th>
                <th>Alias</th>
                <th>Description</th>
                <th>Location</th>
            </tr>
        </thead>
        <tbody>
        {% for trait in correlation_data_slice %}
            <tr>
                <td>{{ trait }}</td>
                <td>{{ correlation_data_slice[trait].correlation }}</td>
                <td>{{ correlation_data_slice[trait].p_value }}</td>
                <td>{{ correlation_data_slice[trait].symbol }}</td>
                <td>{{ correlation_data_slice[trait].alias }}</td>
                <td>{{ correlation_data_slice[trait].description }}</td>
                <td>Chr{{ correlation_data_slice[trait].chromosome }}: {{ correlation_data_slice[trait].mb }}</td>
                {# <td>{{ correlation_data_slice[trait][2].__dict__ }}</td> #}
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block js %}  
    <script language="javascript" type="text/javascript" src="/static/new/packages/DataTables/js/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="/static/new/packages/DataTables/js/jquery.dataTables.min.js"></script>
    <script language="javascript" type="text/javascript" src="/static/packages/DT_bootstrap/DT_bootstrap.js"></script>
    <script language="javascript" type="text/javascript" src="/static/packages/TableTools/media/js/TableTools.min.js"></script>
    <script language="javascript" type="text/javascript" src="/static/packages/underscore/underscore-min.js"></script>
    <script type="text/javascript" charset="utf-8">
        $(document).ready( function () {
            console.time("Creating table");
            $('#corr_results').dataTable( {
                //"sDom": "<<'span3'l><'span3'T><'span4'f>'row-fluid'r>t<'row-fluid'<'span6'i><'span6'p>>",
                "sDom": "lTftipr",
                "oTableTools": {
                    "aButtons": [
                        "copy",
                        "print",
                        {
                            "sExtends":    "collection",
                            "sButtonText": 'Save <span class="caret" />',
                            "aButtons":    [ "csv", "xls", "pdf" ]
                        }
                    ],
                    "sSwfPath": "/static/packages/TableTools/media/swf/copy_csv_xls_pdf.swf"
                },
                "iDisplayLength": 50,
                "bLengthChange": true,
                "bDeferRender": true,
                "bSortClasses": false
            } );
            console.timeEnd("Creating table");
        });
    </script>
{% endblock %}