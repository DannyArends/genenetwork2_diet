{% extends "base.html" %}
{% block title %}WCGNA results{% endblock %}

{% block content %} <!-- Start of body -->
  <div class="container">
    <h1>WGCNA Results</h1>
    <h4>Soft threshold table</h4>
    <table width="80%">
      <tr><th>Power</th><th>SFT.R.sq</th><th>slope</th><th>truncated.R.sq</th><th>mean.k</th><th>median.k</th><th>max.k</th><th>Analysis</th></tr>
      {% for r in range(powers[0][0]|length) %}
        <tr>
        {% for c in range(powers[0]|length) %}
        <td>{{powers[0][c][r]|round(3)}}</td>
       {% endfor %}
        <td><input type="submit" value="Redo use power = {{powers[0][0][r]}}" /></td></tr>
    {% endfor %}
    </table>

    <h4>Phenotype / Module table</h4>

    debug: {{results['network']|length}}
    debug: {{results['network'][0]|length}}
    {{phenotypes[0][0]}}
    <table width="80%">
      <tr><th>Phenotype</th><th>Module</th></tr>
      {% for r in range(results['network'][0]|length) %}
        <tr>
          <td>{{phenotypes[r][0]}}</td>
          <td>{{results['network'][0][r]}}</td>
        </tr>
    {% endfor %}
    </table>

    <h2>WGCNA module plot</h2>
                <a href="/tmp/{{ results['imgurl'] }}">
                    <img alt="Embedded Image" src="data:image/png;base64,
                    {% for elem in results['imgdata'] -%}
                    {% print("%c"|format(elem)) %}
                    {%- endfor %}
                    " /></a>
  </div>
{% endblock %}

